<!--_meta 作为公共模版分离出去-->
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="Bookmark" href="favicon.ico" >
<link rel="Shortcut Icon" href="favicon.ico" />
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css" href="lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/style.css" />
<!--[if IE 6]>
<script type="text/javascript" src="http://lib.h-ui.net/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script><![endif]-->
<!--/meta 作为公共模版分离出去-->

<title>产品分类</title>
<link rel="stylesheet" href="lib/zTree/v3/css/zTreeStyle/zTreeStyle.css" type="text/css">
</head>
<body>
<!--_header 作为公共模版分离出去-->
<header class="navbar-wrapper">
	<div class="navbar navbar-fixed-top">
		<div class="container-fluid cl"> <a class="logo navbar-logo f-l mr-10 hidden-xs" href="index.html">陆宝管理后台</a> <a class="logo navbar-logo-m f-l mr-10 visible-xs" href="#"></a>
			<!--<nav class="nav navbar-nav">-->
				<!--<ul class="cl">-->
					<!--<li class="dropDown dropDown_hover"><a href="javascript:;" class="dropDown_A"><i class="Hui-iconfont">&#xe600;</i> 新增 <i class="Hui-iconfont">&#xe6d5;</i></a>-->
						<!--<ul class="dropDown-menu menu radius box-shadow">-->
<!--&lt;!&ndash;							<li><a href="javascript:;" onclick="article_add('添加资讯','article-add.html')"><i class="Hui-iconfont">&#xe616;</i> 资讯</a></li>&ndash;&gt;-->
<!--&lt;!&ndash;							<li><a href="javascript:;" onclick="picture_add('添加资讯','picture-add.html')"><i class="Hui-iconfont">&#xe613;</i> 图片</a></li>&ndash;&gt;-->
							<!--<li><a href="goods-add.html"><i class="Hui-iconfont">&#xe620;</i> 货物</a></li>-->
<!--&lt;!&ndash;							<li><a href="javascript:;" onclick="member_add('添加用户','member-add.html','','510')"><i class="Hui-iconfont">&#xe60d;</i> 用户</a></li>&ndash;&gt;-->
						<!--</ul>-->
					<!--</li>-->
				<!--</ul>-->
			<!--</nav>-->
			<nav id="Hui-userbar" class="nav navbar-nav navbar-userbar hidden-xs">
				<ul class="cl">
					<li>超级管理员</li>
					<li class="dropDown dropDown_hover"> <a href="#" class="dropDown_A"> <i class="Hui-iconfont">&#xe6d5;</i></a>
						<ul class="dropDown-menu menu radius box-shadow">
<!--							<li><a href="javascript:;" onClick="myselfinfo()">个人信息</a></li>-->
							<li><a href="login.html">切换账户</a></li>
							<li><a href="login.html">退出</a></li>
						</ul>
					</li>
<!--					<li id="Hui-msg"> <a href="#" title="消息"><span class="badge badge-danger">1</span><i class="Hui-iconfont" style="font-size:18px">&#xe68a;</i></a> </li>-->
					<li id="Hui-skin" class="dropDown right dropDown_hover"> <a href="javascript:;" class="dropDown_A" title="换肤"><i class="Hui-iconfont" style="font-size:18px">&#xe62a;</i></a>
						<ul class="dropDown-menu menu radius box-shadow">
							<li><a href="javascript:;" data-val="default" title="默认（黑色）">默认（黑色）</a></li>
							<li><a href="javascript:;" data-val="blue" title="蓝色">蓝色</a></li>
							<li><a href="javascript:;" data-val="green" title="绿色">绿色</a></li>
							<li><a href="javascript:;" data-val="red" title="红色">红色</a></li>
							<li><a href="javascript:;" data-val="yellow" title="黄色">黄色</a></li>
							<li><a href="javascript:;" data-val="orange" title="橙色">橙色</a></li>
						</ul>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</header>
<!--/_header 作为公共模版分离出去-->

<!--_menu 作为公共模版分离出去-->
<aside class="Hui-aside">
	
	<div class="menu_dropdown bk_2">
		<dl id="menu-picture">
			<dt><i class="Hui-iconfont">&#xe620;</i> <a href="goods-list.html" title="货物管理"> 货物管理</a></dt>
		</dl>
		<dl id="订单管理">
			<dt><i class="Hui-iconfont">&#xe687;</i> <a href="order-list.html" title="订单管理"> 订单管理</a></dt>
		</dl>
		<dl id="menu-map">
			<dt><i class="Hui-iconfont">&#xe625;</i> <a href="shop-list.html" title="门店管理"> 门店管理</a></dt>
		</dl>
		<dl id="menu-product">
			<dt><i class="Hui-iconfont">&#xe681;</i> <a href="	product-category.html" title="分类管理"> 分类管理</a></dt>
		</dl>
		<dl id="menu-picPlay">
			<dt><i class="Hui-iconfont">&#xe681;</i> <a href="picPlay-list.html" title="轮播图管理"> 轮播图管理</a></dt>
		</dl>
	</div>
</aside>
<div class="dislpayArrow hidden-xs"><a class="pngfix" href="javascript:void(0);" onClick="displaynavbar(this)"></a></div>
<!--/_menu 作为公共模版分离出去-->

<section class="Hui-article-box">
	<nav class="breadcrumb"><i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span>  产品分类 <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新" ><i class="Hui-iconfont">&#xe68f;</i></a></nav>
	<div class="Hui-article">
		<article class="cl pd-20">
			<table class="table" id="classifyTable">
				<tr>
					<td width="200" id="classifyTableTd" class="va-t"><ul id="treeDemo" class="ztree"></ul></td>
					<td class="va-t"><iframe ID="testIframe" Name="testIframe" FRAMEBORDER=0 SCROLLING=AUTO width=100%  height=390px SRC="product-category-add.html"></iframe></td>
				</tr>
			</table>
		</article>
	</div>
</section>
<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="static/h-ui/js/H-ui.js"></script>
<script type="text/javascript" src="static/h-ui.admin/js/H-ui.admin.page.js"></script>
<!--/_footer /作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" src="lib/datatables/1.10.15/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="lib/laypage/1.2/laypage.js"></script>
<script type="text/javascript" src="lib/zTree/v3/js/jquery.ztree.all-3.5.min.js"></script>
<script type="text/javascript" src="lib/category/common.js"></script>
<script type="text/javascript" src="lib/jquery/common.js"></script>
<script type="text/javascript">
// var setting = {
// 	view: {
// 		dblClickExpand: false,
// 		showLine: false,
// 		selectedMulti: false
// 	},
// 	data: {
// 		simpleData: {
// 			enable:true,
// 			idKey: "id",
// 			pIdKey: "pId",
// 			rootPId: ""
// 		}
// 	},
// 	callback: {
// 		beforeClick: function(treeId, treeNode) {
// 			var zTree = $.fn.zTree.getZTreeObj("tree");
// 			if (treeNode.isParent) {
// 				zTree.expandNode(treeNode);
// 				return false;
// 			} else {
// 				demoIframe.attr("src",treeNode.file + ".html");
// 				return true;
// 			}
// 		}
// 	}
// };

// var zNodes =[
// 	{ id:1, pId:0, name:"一级分类", open:true},
// 	{ id:11, pId:1, name:"二级分类"},
// 	{ id:111, pId:11, name:"三级分类"},
// 	{ id:112, pId:11, name:"三级分类"},
// 	{ id:113, pId:11, name:"三级分类"},
// 	{ id:114, pId:11, name:"三级分类"},
// 	{ id:115, pId:11, name:"三级分类"},
// 	{ id:12, pId:1, name:"二级分类 1-2"},
// 	{ id:121, pId:12, name:"三级分类 1-2-1"},
// 	{ id:122, pId:12, name:"三级分类 1-2-2"},
// ];

// var zNodes =[
// 	{ id:1, pId:0, name:"一级分类", open:true},
// ];
//
// var code;

// function showCode(str) {
// 	if (!code) code = $("#code");
// 	code.empty();
// 	code.append("<li>"+str+"</li>");
// }

//更新当前分类页面的内容
function updateClassify(id,classifyName,classifyDetail)
{
	console.log(id);
	console.log(classifyName);
	console.log(classifyDetail);
	document.getElementById('testIframe').contentWindow.document.getElementById('user-name').value = classifyName;
	document.getElementById('testIframe').contentWindow.document.getElementById('user-name').name = id;
	document.getElementById('testIframe').contentWindow.document.getElementById('detail').value = classifyDetail;

	// $("#classifyTable", document.frames("#testIframe").document).find("#user-name").val(classifyName);
	// $("#classifyTable", document.frames("#testIframe").document).find("#detail").val(classifyDetail);
	// $("#classifyTable", document.frames("#testIframe").document).find("#user-name").attr("name",id);
}

$(document).ready(function(){
	var t = $("#treeDemo");
	$.post(apiHeader + "/classify/getClassifyList",{},function (result) {

		var msgText = "<li id=\"treeDemo_1\" class=\"level0\" tabindex=\"0\" hidefocus=\"true\" treenode=\"\"><span id=\"treeDemo_1_switch\" title=\"\" class=\"button level0 switch noline_open\" treenode_switch=\"\"></span><a id=\"treeDemo_1_a\" class=\"level0\" treenode_a=\"\" onclick=\"\" target=\"_blank\" style=\"\" title=\"一级分类\"><span id=\"treeDemo_1_ico\" title=\"\" treenode_ico=\"\" class=\"button ico_open\" style=\"\"></span><span id=\"treeDemo_1_span\">一级分类</span></a><ul id=\"treeDemo_1_ul\" class=\"level0 \" style=\"display:block\">";

		if(result.code == 0){
			var dataArray = result.data;
			for(var i=0;i<dataArray.length;i++){
				// obj = {id:i+11,pId:1,name:dataArray[i].classifyName};
				// zNodes.push(obj);
				// msgText = msgText + "<li id=\""+i+"\" class=\"level1\" tabin"dex=\"0\" hidefocus=\"true\" treenode=\"\"><span id=\""+i+"_switch\" title=\"\" class=\"button level1 switch noline_docu\" treenode_switch=\"\"></span><a id=\""+i+"_a\" class=\"level1\" treenode_a=\"\" onclick='updateClassify("+dataArray[i].id+","+dataArray[i].classifyName+","+dataArray[i].classifyDetail+")' style=\"\" title=\""+dataArray[i].classifyName+"\"><span id=\"treeDemo_2_ico\" title=\"\" treenode_ico=\"\" class=\"button ico_docu\" style=\"\"></span><span id=\""+i+"_span\">"+dataArray[i].classifyName+"</span></a></li>";
				var tempParam = "\""+dataArray[i].id+"\""+","+ "\"" + dataArray[i].classifyName+ "\"" + ","+ "\"" + dataArray[i].classifyDetail + "\"";
				// console.log(tempParam);
				msgText = msgText + "<li id=\""+i+"\" class=\"level1\" tabindex=\"0\" hidefocus=\"true\" treenode=\"\"><span id=\""+i+"_switch\" title=\"\" class=\"button level1 switch noline_docu\" treenode_switch=\"\"></span><a id=\""+i+"_a\" class=\"level1\" href='#' onclick='updateClassify("+tempParam+")' style=\"\" title=\""+dataArray[i].classifyName+"\"><span id=\"treeDemo_2_ico\" title=\"\" treenode_ico=\"\" class=\"button ico_docu\" style=\"\"></span><span id=\""+i+"_span\">"+dataArray[i].classifyName+"</span></a></li>";
			}
			msgText = msgText + "</ul></li>";
			t.append(msgText);
			// t = $.fn.zTree.init(t, setting, zNodes);
			// demoIframe = $("#testIframe");
			// demoIframe.bind("load", loadReady);
			// var zTree = $.fn.zTree.getZTreeObj("tree");
			// zTree.selectNode(zTree.getNodeByParam("id",'11'));
		}else{
			window.location.href = "login.html"
			// layer.msg(result.message);
		}



	});

	/***
	 * <li id="treeDemo_1" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeDemo_1_switch" title="" class="button level0 switch noline_open" treenode_switch=""></span><a id="treeDemo_1_a" class="level0" treenode_a="" onclick="" target="_blank" style="" title="一级分类"><span id="treeDemo_1_ico" title="" treenode_ico="" class="button ico_open" style=""></span><span id="treeDemo_1_span">一级分类</span></a><ul id="treeDemo_1_ul" class="level0 " style="display:block">

	 * <li id="treeDemo_2" class="level1" tabindex="0" hidefocus="true" treenode=""><span id="treeDemo_2_switch" title="" class="button level1 switch noline_docu" treenode_switch=""></span><a id="treeDemo_2_a" class="level1" treenode_a="" onclick="" target="_blank" style="" title="衣物"><span id="treeDemo_2_ico" title="" treenode_ico="" class="button ico_docu" style=""></span><span id="treeDemo_2_span">衣物</span></a></li>
	 * </ul>
	 *</li>
	 *<
	 */


	// console.log(zNodes);
	// t = $.fn.zTree.init(t, setting, zNodes);
	// demoIframe = $("#testIframe");
	// demoIframe.bind("load", loadReady);
	// var zTree = $.fn.zTree.getZTreeObj("tree");
	// zTree.selectNode(zTree.getNodeByParam("id",'11'));
});
</script>
<!--/请在上方写此页面业务相关的脚本-->
</body>
</html>